{"ast":null,"code":"import _objectSpread from\"D:/Rohit/Git projects/Manthan/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/Rohit/Git projects/Manthan/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{Col,FormGroup,Label}from\"reactstrap\";import{useHistory}from\"react-router-dom\";import{Go_Button}from\"../../components/Common/CommonButton\";import*as _cfunc from\"../../components/Common/CommonFunction\";import{url,mode}from\"../../routes/index\";import{MetaTags}from\"react-meta-tags\";import*as XLSX from'xlsx';import{SSDD_List_under_Company}from\"../../store/actions\";import{customAlert}from\"../../CustomAlert/ConfirmDialog\";import{postRetailerData_API,postRetailerData_API_Success}from\"../../store/Report/RetailerDataRedux/action\";import{C_Select}from\"../../CustomValidateForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RetailerDataReport=function RetailerDataReport(props){var dispatch=useDispatch();var history=useHistory();var isSCMParty=_cfunc.loginIsSCMParty();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),userPageAccessState=_useState2[0],setUserAccState=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),partydropdown=_useState4[0],setPartydropdown=_useState4[1];var reducers=useSelector(function(state){return{listBtnLoading:state.RetailerDataReducer.listBtnLoading,partyLoading:state.CommonAPI_Reducer.SSDD_ListLoading,RetailerGobtn:state.RetailerDataReducer.RetailerGobtn,userAccess:state.Login.RoleAccessUpdateData,SSDD_List:state.CommonAPI_Reducer.SSDD_List,pageField:state.CommonPageFieldReducer.pageFieldList};});var userAccess=reducers.userAccess,SSDD_List=reducers.SSDD_List,listBtnLoading=reducers.listBtnLoading,partyLoading=reducers.partyLoading;var _reducers$RetailerGob=reducers.RetailerGobtn,RetailerGobtn=_reducers$RetailerGob===void 0?[]:_reducers$RetailerGob;// Featch Modules List data  First Rendering\nvar location=_objectSpread({},history.location);var hasShowModal=props.hasOwnProperty(mode.editValue);// userAccess useEffect\nuseEffect(function(){var userAcc=null;var locationPath=location.pathname;if(hasShowModal){locationPath=props.masterPath;};userAcc=userAccess.find(function(inx){return\"/\".concat(inx.ActualPagePath)===locationPath;});if(userAcc){setUserAccState(userAcc);_cfunc.breadcrumbReturnFunc({dispatch:dispatch,userAcc:userAcc});};},[userAccess]);useEffect(function(){dispatch(SSDD_List_under_Company());},[]);useEffect(function(){if(RetailerGobtn.Status===true&&RetailerGobtn.StatusCode===200){var Data=RetailerGobtn.Data;var worksheet=XLSX.utils.json_to_sheet(Data);var workbook=XLSX.utils.book_new();XLSX.utils.book_append_sheet(workbook,worksheet,\"RetailerDataReport\");XLSX.writeFile(workbook,\"Retailer Data Report.xlsx\");dispatch(postRetailerData_API_Success([]));}},[RetailerGobtn]);var Party_Option=SSDD_List.map(function(i){return{value:i.id,label:i.Name};});function goButtonHandler(){if(partydropdown===\"\"){customAlert({Type:3,Message:\"Please Select Party\"});}else{var btnId=\"gobtn-\".concat(url.RETAILER_DATA_REPORT);var jsonBody=JSON.stringify({\"Party\":partydropdown.value});dispatch(postRetailerData_API({jsonBody:jsonBody,btnId:btnId}));}}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(MetaTags,{children:_cfunc.metaTagLabel(userPageAccessState)}),/*#__PURE__*/_jsx(\"div\",{className:\"page-content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"px-2   c_card_filter text-black\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[isSCMParty&&/*#__PURE__*/_jsx(Col,{sm:4,children:/*#__PURE__*/_jsxs(FormGroup,{className:\"mb- row mt-3 mb-2\",children:[/*#__PURE__*/_jsx(Label,{className:\"col-sm-4 p-2\",style:{width:\"65px\"},children:\"Party\"}),/*#__PURE__*/_jsx(Col,{sm:\"8\",children:/*#__PURE__*/_jsx(C_Select,{name:\"party\",value:partydropdown,isSearchable:true,isLoading:partyLoading,className:\"react-dropdown\",classNamePrefix:\"dropdown\",styles:{menu:function menu(provided){return _objectSpread(_objectSpread({},provided),{},{zIndex:2});}},options:Party_Option,onChange:function onChange(e){setPartydropdown(e);}})})]})}),/*#__PURE__*/_jsx(Col,{sm:\"1\",className:\"mt-3 mb-3 \",children:/*#__PURE__*/_jsx(Go_Button,{onClick:goButtonHandler,loading:listBtnLoading})})]})})})]});};export default RetailerDataReport;","map":{"version":3,"names":["React","useEffect","useState","useSelector","useDispatch","Col","FormGroup","Label","useHistory","Go_Button","_cfunc","url","mode","MetaTags","XLSX","SSDD_List_under_Company","customAlert","postRetailerData_API","postRetailerData_API_Success","C_Select","RetailerDataReport","props","dispatch","history","isSCMParty","loginIsSCMParty","userPageAccessState","setUserAccState","partydropdown","setPartydropdown","reducers","state","listBtnLoading","RetailerDataReducer","partyLoading","CommonAPI_Reducer","SSDD_ListLoading","RetailerGobtn","userAccess","Login","RoleAccessUpdateData","SSDD_List","pageField","CommonPageFieldReducer","pageFieldList","location","hasShowModal","hasOwnProperty","editValue","userAcc","locationPath","pathname","masterPath","find","inx","ActualPagePath","breadcrumbReturnFunc","Status","StatusCode","Data","worksheet","utils","json_to_sheet","workbook","book_new","book_append_sheet","writeFile","Party_Option","map","i","value","id","label","Name","goButtonHandler","Type","Message","btnId","RETAILER_DATA_REPORT","jsonBody","JSON","stringify","metaTagLabel","width","menu","provided","zIndex","e"],"sources":["D:/Rohit/Git projects/Manthan/src/Reports/RetailerDataReport/RetailerDataReport.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Col, FormGroup, Label } from \"reactstrap\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Go_Button } from \"../../components/Common/CommonButton\";\r\nimport * as _cfunc from \"../../components/Common/CommonFunction\";\r\nimport { url, mode, } from \"../../routes/index\"\r\nimport { MetaTags } from \"react-meta-tags\";\r\nimport * as XLSX from 'xlsx';\r\nimport { SSDD_List_under_Company } from \"../../store/actions\";\r\nimport { customAlert } from \"../../CustomAlert/ConfirmDialog\";\r\nimport { postRetailerData_API, postRetailerData_API_Success } from \"../../store/Report/RetailerDataRedux/action\";\r\nimport { C_Select } from \"../../CustomValidateForm\";\r\n\r\nconst RetailerDataReport = (props) => {\r\n\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const isSCMParty = _cfunc.loginIsSCMParty();\r\n\r\n    const [userPageAccessState, setUserAccState] = useState('');\r\n    const [partydropdown, setPartydropdown] = useState('')\r\n\r\n    const reducers = useSelector(\r\n        (state) => ({\r\n            listBtnLoading: state.RetailerDataReducer.listBtnLoading,\r\n            partyLoading: state.CommonAPI_Reducer.SSDD_ListLoading,\r\n            RetailerGobtn: state.RetailerDataReducer.RetailerGobtn,\r\n            userAccess: state.Login.RoleAccessUpdateData,\r\n            SSDD_List: state.CommonAPI_Reducer.SSDD_List,\r\n            pageField: state.CommonPageFieldReducer.pageFieldList\r\n        })\r\n    );\r\n    const { userAccess, SSDD_List, listBtnLoading, partyLoading } = reducers;\r\n    const { RetailerGobtn = [] } = reducers\r\n\r\n    // Featch Modules List data  First Rendering\r\n    const location = { ...history.location }\r\n    const hasShowModal = props.hasOwnProperty(mode.editValue)\r\n\r\n    // userAccess useEffect\r\n    useEffect(() => {\r\n        let userAcc = null;\r\n        let locationPath = location.pathname;\r\n        if (hasShowModal) {\r\n            locationPath = props.masterPath;\r\n        };\r\n        userAcc = userAccess.find((inx) => {\r\n            return (`/${inx.ActualPagePath}` === locationPath)\r\n        })\r\n        if (userAcc) {\r\n            setUserAccState(userAcc)\r\n            _cfunc.breadcrumbReturnFunc({ dispatch, userAcc });\r\n        };\r\n    }, [userAccess])\r\n\r\n    useEffect(() => {\r\n        dispatch(SSDD_List_under_Company());\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n\r\n        if (RetailerGobtn.Status === true && RetailerGobtn.StatusCode === 200) {\r\n            const { Data } = RetailerGobtn\r\n            const worksheet = XLSX.utils.json_to_sheet(Data);\r\n            const workbook = XLSX.utils.book_new();\r\n            XLSX.utils.book_append_sheet(workbook, worksheet, \"RetailerDataReport\");\r\n            XLSX.writeFile(workbook, \"Retailer Data Report.xlsx\");\r\n            dispatch(postRetailerData_API_Success([]));\r\n        }\r\n    }, [RetailerGobtn]);\r\n\r\n\r\n    const Party_Option = SSDD_List.map(i => ({\r\n        value: i.id,\r\n        label: i.Name\r\n    }));\r\n\r\n\r\n    function goButtonHandler() {\r\n        if (partydropdown === \"\") {\r\n            customAlert({\r\n                Type: 3,\r\n                Message: \"Please Select Party\",\r\n            })\r\n        }\r\n        else {\r\n            const btnId = `gobtn-${url.RETAILER_DATA_REPORT}`\r\n            const jsonBody = JSON.stringify({\r\n                \"Party\": partydropdown.value\r\n            });\r\n            dispatch(postRetailerData_API({ jsonBody, btnId }));\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <MetaTags>{_cfunc.metaTagLabel(userPageAccessState)}</MetaTags>\r\n            <div className=\"page-content\">\r\n                <div className=\"px-2   c_card_filter text-black\" >\r\n                    <div className=\"row\" >\r\n\r\n                        {isSCMParty &&\r\n                            <Col sm={4} >\r\n                                <FormGroup className=\"mb- row mt-3 mb-2\" >\r\n                                    <Label className=\"col-sm-4 p-2\"\r\n                                        style={{ width: \"65px\" }}>Party</Label>\r\n                                    <Col sm=\"8\">\r\n                                        <C_Select\r\n                                            name=\"party\"\r\n                                            value={partydropdown}\r\n                                            isSearchable={true}\r\n                                            isLoading={partyLoading}\r\n                                            className=\"react-dropdown\"\r\n                                            classNamePrefix=\"dropdown\"\r\n                                            styles={{\r\n                                                menu: provided => ({ ...provided, zIndex: 2 })\r\n                                            }}\r\n                                            options={Party_Option}\r\n                                            onChange={(e) => { setPartydropdown(e) }}\r\n\r\n                                        />\r\n                                    </Col>\r\n                                </FormGroup>\r\n                            </Col>\r\n                        }\r\n\r\n                        <Col sm=\"1\" className=\"mt-3 mb-3 \">\r\n                            <Go_Button onClick={goButtonHandler} loading={listBtnLoading} />\r\n                        </Col>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </React.Fragment >\r\n    )\r\n}\r\n\r\nexport default RetailerDataReport;"],"mappings":"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"},"metadata":{},"sourceType":"module"}