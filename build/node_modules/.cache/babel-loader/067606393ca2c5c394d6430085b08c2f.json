{"ast":null,"code":"'use strict';\n\nvar Lib = require('../lib');\n\nvar Axes = require('../plots/cartesian/axes');\n\nvar pointsAccessorFunction = require('./helpers').pointsAccessorFunction;\n\nvar BADNUM = require('../constants/numerical').BADNUM;\n\nexports.moduleType = 'transform';\nexports.name = 'sort';\nexports.attributes = {\n  enabled: {\n    valType: 'boolean',\n    dflt: true,\n    editType: 'calc',\n    description: ['Determines whether this sort transform is enabled or disabled.'].join(' ')\n  },\n  target: {\n    valType: 'string',\n    strict: true,\n    noBlank: true,\n    arrayOk: true,\n    dflt: 'x',\n    editType: 'calc',\n    description: ['Sets the target by which the sort transform is applied.', 'If a string, *target* is assumed to be a reference to a data array', 'in the parent trace object.', 'To sort about nested variables, use *.* to access them.', 'For example, set `target` to *marker.size* to sort', 'about the marker size array.', 'If an array, *target* is then the data array by which', 'the sort transform is applied.'].join(' ')\n  },\n  order: {\n    valType: 'enumerated',\n    values: ['ascending', 'descending'],\n    dflt: 'ascending',\n    editType: 'calc',\n    description: ['Sets the sort transform order.'].join(' ')\n  },\n  editType: 'calc'\n};\n\nexports.supplyDefaults = function (transformIn) {\n  var transformOut = {};\n\n  function coerce(attr, dflt) {\n    return Lib.coerce(transformIn, transformOut, exports.attributes, attr, dflt);\n  }\n\n  var enabled = coerce('enabled');\n\n  if (enabled) {\n    coerce('target');\n    coerce('order');\n  }\n\n  return transformOut;\n};\n\nexports.calcTransform = function (gd, trace, opts) {\n  if (!opts.enabled) return;\n  var targetArray = Lib.getTargetArray(trace, opts);\n  if (!targetArray) return;\n  var target = opts.target;\n  var len = targetArray.length;\n  if (trace._length) len = Math.min(len, trace._length);\n  var arrayAttrs = trace._arrayAttrs;\n  var d2c = Axes.getDataToCoordFunc(gd, trace, target, targetArray);\n  var indices = getIndices(opts, targetArray, d2c, len);\n  var originalPointsAccessor = pointsAccessorFunction(trace.transforms, opts);\n  var indexToPoints = {};\n  var i, j;\n\n  for (i = 0; i < arrayAttrs.length; i++) {\n    var np = Lib.nestedProperty(trace, arrayAttrs[i]);\n    var arrayOld = np.get();\n    var arrayNew = new Array(len);\n\n    for (j = 0; j < len; j++) {\n      arrayNew[j] = arrayOld[indices[j]];\n    }\n\n    np.set(arrayNew);\n  }\n\n  for (j = 0; j < len; j++) {\n    indexToPoints[j] = originalPointsAccessor(indices[j]);\n  }\n\n  opts._indexToPoints = indexToPoints;\n  trace._length = len;\n};\n\nfunction getIndices(opts, targetArray, d2c, len) {\n  var sortedArray = new Array(len);\n  var indices = new Array(len);\n  var i;\n\n  for (i = 0; i < len; i++) {\n    sortedArray[i] = {\n      v: targetArray[i],\n      i: i\n    };\n  }\n\n  sortedArray.sort(getSortFunc(opts, d2c));\n\n  for (i = 0; i < len; i++) {\n    indices[i] = sortedArray[i].i;\n  }\n\n  return indices;\n}\n\nfunction getSortFunc(opts, d2c) {\n  switch (opts.order) {\n    case 'ascending':\n      return function (a, b) {\n        var ac = d2c(a.v);\n        var bc = d2c(b.v);\n\n        if (ac === BADNUM) {\n          return 1;\n        }\n\n        if (bc === BADNUM) {\n          return -1;\n        }\n\n        return ac - bc;\n      };\n\n    case 'descending':\n      return function (a, b) {\n        var ac = d2c(a.v);\n        var bc = d2c(b.v);\n\n        if (ac === BADNUM) {\n          return 1;\n        }\n\n        if (bc === BADNUM) {\n          return -1;\n        }\n\n        return bc - ac;\n      };\n  }\n}","map":{"version":3,"names":["Lib","require","Axes","pointsAccessorFunction","BADNUM","exports","moduleType","name","attributes","enabled","valType","dflt","editType","description","join","target","strict","noBlank","arrayOk","order","values","supplyDefaults","transformIn","transformOut","coerce","attr","calcTransform","gd","trace","opts","targetArray","getTargetArray","len","length","_length","Math","min","arrayAttrs","_arrayAttrs","d2c","getDataToCoordFunc","indices","getIndices","originalPointsAccessor","transforms","indexToPoints","i","j","np","nestedProperty","arrayOld","get","arrayNew","Array","set","_indexToPoints","sortedArray","v","sort","getSortFunc","a","b","ac","bc"],"sources":["D:/Rohit/Git projects/Manthan/node_modules/plotly.js/src/transforms/sort.js"],"sourcesContent":["'use strict';\n\nvar Lib = require('../lib');\nvar Axes = require('../plots/cartesian/axes');\nvar pointsAccessorFunction = require('./helpers').pointsAccessorFunction;\n\nvar BADNUM = require('../constants/numerical').BADNUM;\n\nexports.moduleType = 'transform';\n\nexports.name = 'sort';\n\nexports.attributes = {\n    enabled: {\n        valType: 'boolean',\n        dflt: true,\n        editType: 'calc',\n        description: [\n            'Determines whether this sort transform is enabled or disabled.'\n        ].join(' ')\n    },\n    target: {\n        valType: 'string',\n        strict: true,\n        noBlank: true,\n        arrayOk: true,\n        dflt: 'x',\n        editType: 'calc',\n        description: [\n            'Sets the target by which the sort transform is applied.',\n\n            'If a string, *target* is assumed to be a reference to a data array',\n            'in the parent trace object.',\n            'To sort about nested variables, use *.* to access them.',\n            'For example, set `target` to *marker.size* to sort',\n            'about the marker size array.',\n\n            'If an array, *target* is then the data array by which',\n            'the sort transform is applied.'\n        ].join(' ')\n    },\n    order: {\n        valType: 'enumerated',\n        values: ['ascending', 'descending'],\n        dflt: 'ascending',\n        editType: 'calc',\n        description: [\n            'Sets the sort transform order.'\n        ].join(' ')\n    },\n    editType: 'calc'\n};\n\nexports.supplyDefaults = function(transformIn) {\n    var transformOut = {};\n\n    function coerce(attr, dflt) {\n        return Lib.coerce(transformIn, transformOut, exports.attributes, attr, dflt);\n    }\n\n    var enabled = coerce('enabled');\n\n    if(enabled) {\n        coerce('target');\n        coerce('order');\n    }\n\n    return transformOut;\n};\n\nexports.calcTransform = function(gd, trace, opts) {\n    if(!opts.enabled) return;\n\n    var targetArray = Lib.getTargetArray(trace, opts);\n    if(!targetArray) return;\n\n    var target = opts.target;\n\n    var len = targetArray.length;\n    if(trace._length) len = Math.min(len, trace._length);\n\n    var arrayAttrs = trace._arrayAttrs;\n    var d2c = Axes.getDataToCoordFunc(gd, trace, target, targetArray);\n    var indices = getIndices(opts, targetArray, d2c, len);\n    var originalPointsAccessor = pointsAccessorFunction(trace.transforms, opts);\n    var indexToPoints = {};\n    var i, j;\n\n    for(i = 0; i < arrayAttrs.length; i++) {\n        var np = Lib.nestedProperty(trace, arrayAttrs[i]);\n        var arrayOld = np.get();\n        var arrayNew = new Array(len);\n\n        for(j = 0; j < len; j++) {\n            arrayNew[j] = arrayOld[indices[j]];\n        }\n\n        np.set(arrayNew);\n    }\n\n    for(j = 0; j < len; j++) {\n        indexToPoints[j] = originalPointsAccessor(indices[j]);\n    }\n\n    opts._indexToPoints = indexToPoints;\n    trace._length = len;\n};\n\nfunction getIndices(opts, targetArray, d2c, len) {\n    var sortedArray = new Array(len);\n    var indices = new Array(len);\n    var i;\n\n    for(i = 0; i < len; i++) {\n        sortedArray[i] = {v: targetArray[i], i: i};\n    }\n\n    sortedArray.sort(getSortFunc(opts, d2c));\n\n    for(i = 0; i < len; i++) {\n        indices[i] = sortedArray[i].i;\n    }\n\n    return indices;\n}\n\nfunction getSortFunc(opts, d2c) {\n    switch(opts.order) {\n        case 'ascending':\n            return function(a, b) {\n                var ac = d2c(a.v);\n                var bc = d2c(b.v);\n                if(ac === BADNUM) {\n                    return 1;\n                }\n                if(bc === BADNUM) {\n                    return -1;\n                }\n                return ac - bc;\n            };\n        case 'descending':\n            return function(a, b) {\n                var ac = d2c(a.v);\n                var bc = d2c(b.v);\n                if(ac === BADNUM) {\n                    return 1;\n                }\n                if(bc === BADNUM) {\n                    return -1;\n                }\n                return bc - ac;\n            };\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}