{"ast":null,"code":"import _regeneratorRuntime from\"D:/Rohit/Git projects/Manthan/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Rohit/Git projects/Manthan/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"D:/Rohit/Git projects/Manthan/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/Rohit/Git projects/Manthan/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{BreadcrumbShowCountlabel,commonPageFieldList,commonPageFieldListSuccess}from\"../../../store/actions\";import CommonPurchaseList from\"../../../components/Common/CommonPurchaseList\";import{useHistory}from\"react-router-dom\";import{url,mode,pageId}from\"../../../routes/index\";import*as _cfunc from\"../../../components/Common/CommonFunction\";import*as _act from\"../../../store/actions\";import{customAlert}from\"../../../CustomAlert/ConfirmDialog\";import GSTMaster from\"./GSTMaster\";import{deleteGSTListId,deleteGSTListId_Success,getGSTList,goButtonForGST_Master_Success}from\"../../../store/Administrator/GSTRedux/action\";import{jsx as _jsx}from\"react/jsx-runtime\";var GSTList=function GSTList(){var dispatch=useDispatch();var history=useHistory();var hasPagePath=history.location.pathname;var _useState=useState(mode.defaultsave),_useState2=_slicedToArray(_useState,2),pageMode=_useState2[0],setpageMode=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),userAccState=_useState4[0],setUserAccState=_useState4[1];var reducers=useSelector(function(state){return{tableList:state.GSTReducer.GSTList,GSTGoButton:state.GSTReducer.GSTGoButton,deleteMsg:state.GSTReducer.deleteMsg,userAccess:state.Login.RoleAccessUpdateData,pageField:state.CommonPageFieldReducer.pageFieldList};});var userAccess=reducers.userAccess,pageField=reducers.pageField,GSTGoButton=reducers.GSTGoButton,deleteMsg=reducers.deleteMsg;var action={getList:getGSTList,deleteId:deleteGSTListId,deleteSucc:deleteGSTListId_Success};var page_Id=pageId.GST_LIST;// Featch Modules List data  First Rendering\nuseEffect(function(){setpageMode(hasPagePath);dispatch(commonPageFieldListSuccess(null));dispatch(commonPageFieldList(page_Id));dispatch(BreadcrumbShowCountlabel(\"GST Count\".concat(\" :0\")));dispatch(getGSTList());},[]);useEffect(function(){var userAcc=userAccess.find(function(inx){return inx.id===page_Id;});if(!(userAcc===undefined)){setUserAccState(userAcc);}},[userAccess]);useEffect(function(){if(deleteMsg.Status===true&&deleteMsg.StatusCode===200){dispatch(deleteGSTListId_Success([]));dispatch(getGSTList());}},[deleteMsg]);useEffect(function(){if(GSTGoButton.Status===true&&GSTGoButton.StatusCode===200){dispatch(goButtonForGST_Master_Success(_objectSpread(_objectSpread({},GSTGoButton),{},{Status:false})));history.push({pathname:GSTGoButton.pathname,page_Mode:GSTGoButton.pageMode,editValue:GSTGoButton.rowData});}},[GSTGoButton]);function editBodyfunc(index){var rowData=index.rowData,btnId=index.btnId;var preEffectiveDate=rowData.preEffectiveDate;_cfunc.btnIsDissablefunc({btnId:btnId,state:true});try{var jsonBody=JSON.stringify({EffectiveDate:preEffectiveDate});var config={jsonBody:jsonBody,pathname:url.GST,btnmode:mode.edit,rowData:rowData};// sessionStorage.setItem(\"margin_Master\", config)\ndispatch(_act.goButtonForGST_Master(config));}catch(error){_cfunc.btnIsDissablefunc({btnId:btnId,state:false});}}function deleteBodyfunc(_x){return _deleteBodyfunc.apply(this,arguments);}function _deleteBodyfunc(){_deleteBodyfunc=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(index){var rowData,btnId,rep,config;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:rowData=index.rowData,btnId=index.btnId;if(!rowData.CommonID){_context.next=6;break;}_context.next=4;return customAlert({Type:8,Message:\"Are you sure you want to delete this \".concat(\"EffectiveDate\",\": \\\"\",rowData.EffectiveDate,\"\\\"\")});case 4:rep=_context.sent;if(rep){_cfunc.btnIsDissablefunc({btnId:btnId,state:true});config={btnId:btnId,deleteId:rowData.CommonID};try{dispatch(deleteGSTListId(config));}catch(error){_cfunc.btnIsDissablefunc({btnId:btnId,state:false});}}case 6:case\"end\":return _context.stop();}}},_callee);}));return _deleteBodyfunc.apply(this,arguments);}return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"page-content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"mt-n1\",children:pageField?/*#__PURE__*/_jsx(CommonPurchaseList,{action:action,reducers:reducers,showBreadcrumb:false,MasterModal:GSTMaster,masterPath:url.GST,newBtnPath:url.GST,ButtonMsgLable:\"GST\",deleteName:\"EffectiveDate\",pageMode:pageMode,editBodyfunc:editBodyfunc,deleteBodyfunc:deleteBodyfunc}):null})})});};export default GSTList;","map":{"version":3,"names":["React","useEffect","useState","useSelector","useDispatch","BreadcrumbShowCountlabel","commonPageFieldList","commonPageFieldListSuccess","CommonPurchaseList","useHistory","url","mode","pageId","_cfunc","_act","customAlert","GSTMaster","deleteGSTListId","deleteGSTListId_Success","getGSTList","goButtonForGST_Master_Success","GSTList","dispatch","history","hasPagePath","location","pathname","defaultsave","pageMode","setpageMode","userAccState","setUserAccState","reducers","state","tableList","GSTReducer","GSTGoButton","deleteMsg","userAccess","Login","RoleAccessUpdateData","pageField","CommonPageFieldReducer","pageFieldList","action","getList","deleteId","deleteSucc","page_Id","GST_LIST","userAcc","find","inx","id","undefined","Status","StatusCode","push","page_Mode","editValue","rowData","editBodyfunc","index","btnId","preEffectiveDate","btnIsDissablefunc","jsonBody","JSON","stringify","EffectiveDate","config","GST","btnmode","edit","goButtonForGST_Master","error","deleteBodyfunc","CommonID","Type","Message","rep"],"sources":["D:/Rohit/Git projects/Manthan/src/pages/Adminisrator/GSTPages/GSTList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport {\r\n  BreadcrumbShowCountlabel,\r\n  commonPageFieldList,\r\n  commonPageFieldListSuccess\r\n} from \"../../../store/actions\";\r\nimport CommonPurchaseList from \"../../../components/Common/CommonPurchaseList\"\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { url, mode, pageId } from \"../../../routes/index\"\r\nimport * as _cfunc from \"../../../components/Common/CommonFunction\";\r\nimport * as _act from \"../../../store/actions\";\r\nimport { customAlert } from \"../../../CustomAlert/ConfirmDialog\";\r\nimport GSTMaster from \"./GSTMaster\";\r\nimport { deleteGSTListId, deleteGSTListId_Success, getGSTList, goButtonForGST_Master_Success } from \"../../../store/Administrator/GSTRedux/action\";\r\n\r\nconst GSTList = () => {\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const hasPagePath = history.location.pathname\r\n\r\n  const [pageMode, setpageMode] = useState(mode.defaultsave)\r\n  const [userAccState, setUserAccState] = useState('');\r\n\r\n  const reducers = useSelector(\r\n    (state) => ({\r\n      tableList: state.GSTReducer.GSTList,\r\n      GSTGoButton: state.GSTReducer.GSTGoButton,\r\n      deleteMsg: state.GSTReducer.deleteMsg,\r\n      userAccess: state.Login.RoleAccessUpdateData,\r\n      pageField: state.CommonPageFieldReducer.pageFieldList\r\n    })\r\n  );\r\n\r\n  const { userAccess, pageField, GSTGoButton, deleteMsg } = reducers;\r\n\r\n  const action = {\r\n    getList: getGSTList,\r\n    deleteId: deleteGSTListId,\r\n    deleteSucc: deleteGSTListId_Success\r\n  }\r\n  const page_Id = pageId.GST_LIST\r\n\r\n  // Featch Modules List data  First Rendering\r\n  useEffect(() => {\r\n    setpageMode(hasPagePath)\r\n    dispatch(commonPageFieldListSuccess(null))\r\n    dispatch(commonPageFieldList(page_Id))\r\n    dispatch(BreadcrumbShowCountlabel(`${\"GST Count\"} :0`))\r\n    dispatch(getGSTList())\r\n\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let userAcc = userAccess.find((inx) => {\r\n      return (inx.id === page_Id)\r\n    })\r\n    if (!(userAcc === undefined)) {\r\n      setUserAccState(userAcc)\r\n    }\r\n  }, [userAccess])\r\n\r\n  useEffect(() => {\r\n\r\n    if (deleteMsg.Status === true && deleteMsg.StatusCode === 200) {\r\n      dispatch(deleteGSTListId_Success([]))\r\n      dispatch(getGSTList())\r\n    }\r\n  }, [deleteMsg]);\r\n\r\n  useEffect(() => {\r\n\r\n    if (GSTGoButton.Status === true && GSTGoButton.StatusCode === 200) {\r\n      dispatch(goButtonForGST_Master_Success({ ...GSTGoButton, Status: false }))\r\n      history.push({\r\n        pathname: GSTGoButton.pathname,\r\n        page_Mode: GSTGoButton.pageMode,\r\n        editValue: GSTGoButton.rowData\r\n      })\r\n    }\r\n  }, [GSTGoButton]);\r\n\r\n  function editBodyfunc(index) {\r\n    \r\n    const { rowData, btnId } = index\r\n    let { preEffectiveDate } = rowData;\r\n    _cfunc.btnIsDissablefunc({ btnId, state: true })\r\n\r\n    try {\r\n      const jsonBody = JSON.stringify({\r\n        EffectiveDate: preEffectiveDate\r\n      })\r\n      let config = { jsonBody, pathname: url.GST, btnmode: mode.edit, rowData: rowData }\r\n      // sessionStorage.setItem(\"margin_Master\", config)\r\n      dispatch(_act.goButtonForGST_Master(config));\r\n    } catch (error) { _cfunc.btnIsDissablefunc({ btnId, state: false }) }\r\n  }\r\n\r\n  async function deleteBodyfunc(index) {\r\n\r\n    const { rowData, btnId } = index\r\n    if (rowData.CommonID) {\r\n      const rep = await customAlert({\r\n        Type: 8,\r\n        Message: `Are you sure you want to delete this ${\"EffectiveDate\"}: \"${rowData.EffectiveDate}\"`,\r\n      })\r\n      if (rep) {\r\n        _cfunc.btnIsDissablefunc({ btnId, state: true })\r\n        let config = { btnId, deleteId: rowData.CommonID }\r\n        try {\r\n          dispatch(deleteGSTListId(config))\r\n        }\r\n        catch (error) { _cfunc.btnIsDissablefunc({ btnId, state: false }) }\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"page-content\">\r\n\r\n        <div className=\"mt-n1\">\r\n          {\r\n            (pageField) ?\r\n              <CommonPurchaseList\r\n                action={action}\r\n                reducers={reducers}\r\n                showBreadcrumb={false}\r\n                MasterModal={GSTMaster}\r\n                masterPath={url.GST}\r\n                newBtnPath={url.GST}\r\n                ButtonMsgLable={\"GST\"}\r\n                deleteName={\"EffectiveDate\"}\r\n                pageMode={pageMode}\r\n                editBodyfunc={editBodyfunc}\r\n                deleteBodyfunc={deleteBodyfunc}\r\n              />\r\n              : null\r\n          }\r\n        </div>\r\n\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default GSTList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}