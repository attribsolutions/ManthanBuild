{"ast":null,"code":"import _slicedToArray from\"D:/Rohit/Git projects/Manthan/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useSelector}from'react-redux';import'../../../assets/searchBox/searchBox.scss';import{MySearch}from'./MySearch';import{jsx as _jsx}from\"react/jsx-runtime\";export var MainSearchBox=function MainSearchBox(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),searchRoleData=_useState2[0],setSearchRoleData=_useState2[1];var _useSelector=useSelector(function(state){return{RoleAccessData:state.Login.roleAccessSidbarData,searchProps:state.BreadcrumbReducer.searchProps};}),RoleAccessData=_useSelector.RoleAccessData,searchProps=_useSelector.searchProps;useEffect(function(){var flattenModuleData=RoleAccessData.flatMap(function(i){return i.ModuleData;});setSearchRoleData(flattenModuleData);},[RoleAccessData]);useEffect(function(){function autocomplete(inp,arr){var currentFocus;inp.addEventListener('input',function(e){var val=this.value.trim().toLowerCase();closeAllLists();if(val==='/'){return;}if(val.startsWith('/')){var trimmedVal=val.substring(1);currentFocus=-1;var filteredItems=arr.filter(function(item){return item.Name.toLowerCase().includes(trimmedVal);});if(filteredItems.length>0){var list=document.createElement('div');list.setAttribute('id',\"\".concat(this.id,\"autocomplete-list\"));list.setAttribute('class','autocomplete-items');this.parentNode.appendChild(list);filteredItems.forEach(function(item,index){var itemDiv=document.createElement('div');itemDiv.innerHTML=\"<strong>\".concat(item.Name,\"</strong>\").concat(item.Name.substring(1));itemDiv.innerHTML+=\"<input type='hidden' id='\".concat(index,\"' value='\").concat(item.Name,\"'>\");itemDiv.addEventListener('click',function(e){inp.value=this.getElementsByTagName('input')[0].value;var inputId=this.getElementsByTagName('input')[0].id;var actualPagePath=filteredItems[inputId].ActualPagePath;window.location.href=actualPagePath;closeAllLists();});list.appendChild(itemDiv);});}}});inp.addEventListener('keydown',function(e){var list=document.getElementById(\"\".concat(this.id,\"autocomplete-list\"));if(list){var items=list.getElementsByTagName('div');if(e.keyCode===40){currentFocus++;addActive(items);}else if(e.keyCode===38){currentFocus--;addActive(items);}else if(e.keyCode===13){e.preventDefault();if(currentFocus>-1){if(items)items[currentFocus].click();}}}});function addActive(items){if(!items)return false;removeActive(items);if(currentFocus>=items.length)currentFocus=0;if(currentFocus<0)currentFocus=items.length-1;items[currentFocus].classList.add('autocomplete-active');}function removeActive(items){for(var i=0;i<items.length;i++){items[i].classList.remove('autocomplete-active');}}function closeAllLists(){var lists=document.getElementsByClassName('autocomplete-items');for(var i=0;i<lists.length;i++){lists[i].parentNode.removeChild(lists[i]);}}document.addEventListener('click',function(e){closeAllLists(e.target);});}autocomplete(document.getElementById('myInput'),searchRoleData);},[searchRoleData]);return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"app-search d-none d-lg-block \",style:{marginTop:\"-3px\"},autocomplete:\"off\",children:/*#__PURE__*/_jsx(\"div\",{className:\"position-relative\",children:/*#__PURE__*/_jsx(MySearch,{})})})});};","map":{"version":3,"names":["React","useEffect","useState","useSelector","MySearch","MainSearchBox","searchRoleData","setSearchRoleData","state","RoleAccessData","Login","roleAccessSidbarData","searchProps","BreadcrumbReducer","flattenModuleData","flatMap","i","ModuleData","autocomplete","inp","arr","currentFocus","addEventListener","e","val","value","trim","toLowerCase","closeAllLists","startsWith","trimmedVal","substring","filteredItems","filter","item","Name","includes","length","list","document","createElement","setAttribute","id","parentNode","appendChild","forEach","index","itemDiv","innerHTML","getElementsByTagName","inputId","actualPagePath","ActualPagePath","window","location","href","getElementById","items","keyCode","addActive","preventDefault","click","removeActive","classList","add","remove","lists","getElementsByClassName","removeChild","target","marginTop"],"sources":["D:/Rohit/Git projects/Manthan/src/components/Common/SearchBox/index.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport '../../../assets/searchBox/searchBox.scss';\r\nimport { MySearch } from './MySearch';\r\n\r\nexport const MainSearchBox = () => {\r\n  const [searchRoleData, setSearchRoleData] = useState([]);\r\n  const { RoleAccessData, searchProps } = useSelector((state) => ({\r\n    RoleAccessData: state.Login.roleAccessSidbarData,\r\n    searchProps: state.BreadcrumbReducer.searchProps,\r\n  }));\r\n\r\n  useEffect(() => {\r\n    const flattenModuleData = RoleAccessData.flatMap((i) => i.ModuleData);\r\n    setSearchRoleData(flattenModuleData);\r\n  }, [RoleAccessData]);\r\n\r\n  useEffect(() => {\r\n    function autocomplete(inp, arr) {\r\n      let currentFocus;\r\n\r\n      inp.addEventListener('input', function (e) {\r\n        const val = this.value.trim().toLowerCase();\r\n        closeAllLists();\r\n\r\n        if (val === '/') {\r\n          return;\r\n        }\r\n\r\n        if (val.startsWith('/')) {\r\n          const trimmedVal = val.substring(1);\r\n          currentFocus = -1;\r\n          const filteredItems = arr.filter((item) =>\r\n            item.Name.toLowerCase().includes(trimmedVal)\r\n          );\r\n\r\n          if (filteredItems.length > 0) {\r\n            const list = document.createElement('div');\r\n            list.setAttribute('id', `${this.id}autocomplete-list`);\r\n            list.setAttribute('class', 'autocomplete-items');\r\n            this.parentNode.appendChild(list);\r\n\r\n            filteredItems.forEach((item, index) => {\r\n              const itemDiv = document.createElement('div');\r\n              itemDiv.innerHTML = `<strong>${item.Name}</strong>${item.Name.substring(1)}`;\r\n              itemDiv.innerHTML += `<input type='hidden' id='${index}' value='${item.Name}'>`;\r\n\r\n              itemDiv.addEventListener('click', function (e) {\r\n                inp.value = this.getElementsByTagName('input')[0].value;\r\n                const inputId = this.getElementsByTagName('input')[0].id;\r\n                const actualPagePath = filteredItems[inputId].ActualPagePath;\r\n                window.location.href = actualPagePath;\r\n                closeAllLists();\r\n              });\r\n\r\n              list.appendChild(itemDiv);\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n      inp.addEventListener('keydown', function (e) {\r\n        const list = document.getElementById(`${this.id}autocomplete-list`);\r\n\r\n        if (list) {\r\n          const items = list.getElementsByTagName('div');\r\n\r\n          if (e.keyCode === 40) {\r\n            currentFocus++;\r\n            addActive(items);\r\n          } else if (e.keyCode === 38) {\r\n            currentFocus--;\r\n            addActive(items);\r\n          } else if (e.keyCode === 13) {\r\n            e.preventDefault();\r\n            if (currentFocus > -1) {\r\n              if (items) items[currentFocus].click();\r\n            }\r\n          }\r\n        }\r\n      });\r\n\r\n      function addActive(items) {\r\n        if (!items) return false;\r\n        removeActive(items);\r\n\r\n        if (currentFocus >= items.length) currentFocus = 0;\r\n        if (currentFocus < 0) currentFocus = items.length - 1;\r\n\r\n        items[currentFocus].classList.add('autocomplete-active');\r\n      }\r\n\r\n      function removeActive(items) {\r\n        for (let i = 0; i < items.length; i++) {\r\n          items[i].classList.remove('autocomplete-active');\r\n        }\r\n      }\r\n\r\n      function closeAllLists() {\r\n        const lists = document.getElementsByClassName('autocomplete-items');\r\n\r\n        for (let i = 0; i < lists.length; i++) {\r\n          lists[i].parentNode.removeChild(lists[i]);\r\n        }\r\n      }\r\n\r\n      document.addEventListener('click', function (e) {\r\n        closeAllLists(e.target);\r\n      });\r\n    }\r\n\r\n    autocomplete(document.getElementById('myInput'), searchRoleData);\r\n  }, [searchRoleData]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"app-search d-none d-lg-block \" style={{ marginTop: \"-3px\" }} autocomplete=\"off\">\r\n        <div className=\"position-relative\">\r\n          <MySearch />\r\n        </div>\r\n      </div>\r\n\r\n    </React.Fragment>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}