{"ast":null,"code":"'use strict';\n\nvar d3 = require('@plotly/d3');\n\nvar Lib = require('../../lib');\n\nvar numberFormat = Lib.numberFormat;\n\nvar render = require('./render');\n\nvar Fx = require('../../components/fx');\n\nvar Color = require('../../components/color');\n\nvar cn = require('./constants').cn;\n\nvar _ = Lib._;\n\nfunction renderableValuePresent(d) {\n  return d !== '';\n}\n\nfunction ownTrace(selection, d) {\n  return selection.filter(function (s) {\n    return s.key === d.traceId;\n  });\n}\n\nfunction makeTranslucent(element, alpha) {\n  d3.select(element).select('path').style('fill-opacity', alpha);\n  d3.select(element).select('rect').style('fill-opacity', alpha);\n}\n\nfunction makeTextContrasty(element) {\n  d3.select(element).select('text.name').style('fill', 'black');\n}\n\nfunction relatedLinks(d) {\n  return function (l) {\n    return d.node.sourceLinks.indexOf(l.link) !== -1 || d.node.targetLinks.indexOf(l.link) !== -1;\n  };\n}\n\nfunction relatedNodes(l) {\n  return function (d) {\n    return d.node.sourceLinks.indexOf(l.link) !== -1 || d.node.targetLinks.indexOf(l.link) !== -1;\n  };\n}\n\nfunction nodeHoveredStyle(sankeyNode, d, sankey) {\n  if (d && sankey) {\n    ownTrace(sankey, d).selectAll('.' + cn.sankeyLink).filter(relatedLinks(d)).call(linkHoveredStyle.bind(0, d, sankey, false));\n  }\n}\n\nfunction nodeNonHoveredStyle(sankeyNode, d, sankey) {\n  if (d && sankey) {\n    ownTrace(sankey, d).selectAll('.' + cn.sankeyLink).filter(relatedLinks(d)).call(linkNonHoveredStyle.bind(0, d, sankey, false));\n  }\n}\n\nfunction linkHoveredStyle(d, sankey, visitNodes, sankeyLink) {\n  var label = sankeyLink.datum().link.label;\n  sankeyLink.style('fill-opacity', function (l) {\n    if (!l.link.concentrationscale) {\n      return 0.4;\n    }\n  });\n\n  if (label) {\n    ownTrace(sankey, d).selectAll('.' + cn.sankeyLink).filter(function (l) {\n      return l.link.label === label;\n    }).style('fill-opacity', function (l) {\n      if (!l.link.concentrationscale) {\n        return 0.4;\n      }\n    });\n  }\n\n  if (visitNodes) {\n    ownTrace(sankey, d).selectAll('.' + cn.sankeyNode).filter(relatedNodes(d)).call(nodeHoveredStyle);\n  }\n}\n\nfunction linkNonHoveredStyle(d, sankey, visitNodes, sankeyLink) {\n  var label = sankeyLink.datum().link.label;\n  sankeyLink.style('fill-opacity', function (d) {\n    return d.tinyColorAlpha;\n  });\n\n  if (label) {\n    ownTrace(sankey, d).selectAll('.' + cn.sankeyLink).filter(function (l) {\n      return l.link.label === label;\n    }).style('fill-opacity', function (d) {\n      return d.tinyColorAlpha;\n    });\n  }\n\n  if (visitNodes) {\n    ownTrace(sankey, d).selectAll(cn.sankeyNode).filter(relatedNodes(d)).call(nodeNonHoveredStyle);\n  }\n} // does not support array values for now\n\n\nfunction castHoverOption(trace, attr) {\n  var labelOpts = trace.hoverlabel || {};\n  var val = Lib.nestedProperty(labelOpts, attr).get();\n  return Array.isArray(val) ? false : val;\n}\n\nmodule.exports = function plot(gd, calcData) {\n  var fullLayout = gd._fullLayout;\n  var svg = fullLayout._paper;\n  var size = fullLayout._size; // stash initial view\n\n  for (var i = 0; i < gd._fullData.length; i++) {\n    if (!gd._fullData[i].visible) continue;\n    if (gd._fullData[i].type !== cn.sankey) continue;\n\n    if (!gd._fullData[i]._viewInitial) {\n      var node = gd._fullData[i].node;\n      gd._fullData[i]._viewInitial = {\n        node: {\n          groups: node.groups.slice(),\n          x: node.x.slice(),\n          y: node.y.slice()\n        }\n      };\n    }\n  }\n\n  var linkSelect = function linkSelect(element, d) {\n    var evt = d.link;\n    evt.originalEvent = d3.event;\n    gd._hoverdata = [evt];\n    Fx.click(gd, {\n      target: true\n    });\n  };\n\n  var linkHover = function linkHover(element, d, sankey) {\n    if (gd._fullLayout.hovermode === false) return;\n    d3.select(element).call(linkHoveredStyle.bind(0, d, sankey, true));\n\n    if (d.link.trace.link.hoverinfo !== 'skip') {\n      d.link.fullData = d.link.trace;\n      gd.emit('plotly_hover', {\n        event: d3.event,\n        points: [d.link]\n      });\n    }\n  };\n\n  var sourceLabel = _(gd, 'source:') + ' ';\n  var targetLabel = _(gd, 'target:') + ' ';\n  var concentrationLabel = _(gd, 'concentration:') + ' ';\n  var incomingLabel = _(gd, 'incoming flow count:') + ' ';\n  var outgoingLabel = _(gd, 'outgoing flow count:') + ' ';\n\n  var linkHoverFollow = function linkHoverFollow(element, d) {\n    if (gd._fullLayout.hovermode === false) return;\n    var obj = d.link.trace.link;\n    if (obj.hoverinfo === 'none' || obj.hoverinfo === 'skip') return;\n    var hoverItems = [];\n\n    function hoverCenterPosition(link) {\n      var hoverCenterX, hoverCenterY;\n\n      if (link.circular) {\n        hoverCenterX = (link.circularPathData.leftInnerExtent + link.circularPathData.rightInnerExtent) / 2;\n        hoverCenterY = link.circularPathData.verticalFullExtent;\n      } else {\n        hoverCenterX = (link.source.x1 + link.target.x0) / 2;\n        hoverCenterY = (link.y0 + link.y1) / 2;\n      }\n\n      var center = [hoverCenterX, hoverCenterY];\n      if (link.trace.orientation === 'v') center.reverse();\n      center[0] += d.parent.translateX;\n      center[1] += d.parent.translateY;\n      return center;\n    } // For each related links, create a hoverItem\n\n\n    var anchorIndex = 0;\n\n    for (var i = 0; i < d.flow.links.length; i++) {\n      var link = d.flow.links[i];\n      if (gd._fullLayout.hovermode === 'closest' && d.link.pointNumber !== link.pointNumber) continue;\n      if (d.link.pointNumber === link.pointNumber) anchorIndex = i;\n      link.fullData = link.trace;\n      obj = d.link.trace.link;\n      var hoverCenter = hoverCenterPosition(link);\n      var hovertemplateLabels = {\n        valueLabel: numberFormat(d.valueFormat)(link.value) + d.valueSuffix\n      };\n      hoverItems.push({\n        x: hoverCenter[0],\n        y: hoverCenter[1],\n        name: hovertemplateLabels.valueLabel,\n        text: [link.label || '', sourceLabel + link.source.label, targetLabel + link.target.label, link.concentrationscale ? concentrationLabel + numberFormat('%0.2f')(link.flow.labelConcentration) : ''].filter(renderableValuePresent).join('<br>'),\n        color: castHoverOption(obj, 'bgcolor') || Color.addOpacity(link.color, 1),\n        borderColor: castHoverOption(obj, 'bordercolor'),\n        fontFamily: castHoverOption(obj, 'font.family'),\n        fontSize: castHoverOption(obj, 'font.size'),\n        fontColor: castHoverOption(obj, 'font.color'),\n        nameLength: castHoverOption(obj, 'namelength'),\n        textAlign: castHoverOption(obj, 'align'),\n        idealAlign: d3.event.x < hoverCenter[0] ? 'right' : 'left',\n        hovertemplate: obj.hovertemplate,\n        hovertemplateLabels: hovertemplateLabels,\n        eventData: [link]\n      });\n    }\n\n    var tooltips = Fx.loneHover(hoverItems, {\n      container: fullLayout._hoverlayer.node(),\n      outerContainer: fullLayout._paper.node(),\n      gd: gd,\n      anchorIndex: anchorIndex\n    });\n    tooltips.each(function () {\n      var tooltip = this;\n\n      if (!d.link.concentrationscale) {\n        makeTranslucent(tooltip, 0.65);\n      }\n\n      makeTextContrasty(tooltip);\n    });\n  };\n\n  var linkUnhover = function linkUnhover(element, d, sankey) {\n    if (gd._fullLayout.hovermode === false) return;\n    d3.select(element).call(linkNonHoveredStyle.bind(0, d, sankey, true));\n\n    if (d.link.trace.link.hoverinfo !== 'skip') {\n      d.link.fullData = d.link.trace;\n      gd.emit('plotly_unhover', {\n        event: d3.event,\n        points: [d.link]\n      });\n    }\n\n    Fx.loneUnhover(fullLayout._hoverlayer.node());\n  };\n\n  var nodeSelect = function nodeSelect(element, d, sankey) {\n    var evt = d.node;\n    evt.originalEvent = d3.event;\n    gd._hoverdata = [evt];\n    d3.select(element).call(nodeNonHoveredStyle, d, sankey);\n    Fx.click(gd, {\n      target: true\n    });\n  };\n\n  var nodeHover = function nodeHover(element, d, sankey) {\n    if (gd._fullLayout.hovermode === false) return;\n    d3.select(element).call(nodeHoveredStyle, d, sankey);\n\n    if (d.node.trace.node.hoverinfo !== 'skip') {\n      d.node.fullData = d.node.trace;\n      gd.emit('plotly_hover', {\n        event: d3.event,\n        points: [d.node]\n      });\n    }\n  };\n\n  var nodeHoverFollow = function nodeHoverFollow(element, d) {\n    if (gd._fullLayout.hovermode === false) return;\n    var obj = d.node.trace.node;\n    if (obj.hoverinfo === 'none' || obj.hoverinfo === 'skip') return;\n    var nodeRect = d3.select(element).select('.' + cn.nodeRect);\n\n    var rootBBox = gd._fullLayout._paperdiv.node().getBoundingClientRect();\n\n    var boundingBox = nodeRect.node().getBoundingClientRect();\n    var hoverCenterX0 = boundingBox.left - 2 - rootBBox.left;\n    var hoverCenterX1 = boundingBox.right + 2 - rootBBox.left;\n    var hoverCenterY = boundingBox.top + boundingBox.height / 4 - rootBBox.top;\n    var hovertemplateLabels = {\n      valueLabel: numberFormat(d.valueFormat)(d.node.value) + d.valueSuffix\n    };\n    d.node.fullData = d.node.trace;\n\n    gd._fullLayout._calcInverseTransform(gd);\n\n    var scaleX = gd._fullLayout._invScaleX;\n    var scaleY = gd._fullLayout._invScaleY;\n    var tooltip = Fx.loneHover({\n      x0: scaleX * hoverCenterX0,\n      x1: scaleX * hoverCenterX1,\n      y: scaleY * hoverCenterY,\n      name: numberFormat(d.valueFormat)(d.node.value) + d.valueSuffix,\n      text: [d.node.label, incomingLabel + d.node.targetLinks.length, outgoingLabel + d.node.sourceLinks.length].filter(renderableValuePresent).join('<br>'),\n      color: castHoverOption(obj, 'bgcolor') || d.tinyColorHue,\n      borderColor: castHoverOption(obj, 'bordercolor'),\n      fontFamily: castHoverOption(obj, 'font.family'),\n      fontSize: castHoverOption(obj, 'font.size'),\n      fontColor: castHoverOption(obj, 'font.color'),\n      nameLength: castHoverOption(obj, 'namelength'),\n      textAlign: castHoverOption(obj, 'align'),\n      idealAlign: 'left',\n      hovertemplate: obj.hovertemplate,\n      hovertemplateLabels: hovertemplateLabels,\n      eventData: [d.node]\n    }, {\n      container: fullLayout._hoverlayer.node(),\n      outerContainer: fullLayout._paper.node(),\n      gd: gd\n    });\n    makeTranslucent(tooltip, 0.85);\n    makeTextContrasty(tooltip);\n  };\n\n  var nodeUnhover = function nodeUnhover(element, d, sankey) {\n    if (gd._fullLayout.hovermode === false) return;\n    d3.select(element).call(nodeNonHoveredStyle, d, sankey);\n\n    if (d.node.trace.node.hoverinfo !== 'skip') {\n      d.node.fullData = d.node.trace;\n      gd.emit('plotly_unhover', {\n        event: d3.event,\n        points: [d.node]\n      });\n    }\n\n    Fx.loneUnhover(fullLayout._hoverlayer.node());\n  };\n\n  render(gd, svg, calcData, {\n    width: size.w,\n    height: size.h,\n    margin: {\n      t: size.t,\n      r: size.r,\n      b: size.b,\n      l: size.l\n    }\n  }, {\n    linkEvents: {\n      hover: linkHover,\n      follow: linkHoverFollow,\n      unhover: linkUnhover,\n      select: linkSelect\n    },\n    nodeEvents: {\n      hover: nodeHover,\n      follow: nodeHoverFollow,\n      unhover: nodeUnhover,\n      select: nodeSelect\n    }\n  });\n};","map":{"version":3,"names":["d3","require","Lib","numberFormat","render","Fx","Color","cn","_","renderableValuePresent","d","ownTrace","selection","filter","s","key","traceId","makeTranslucent","element","alpha","select","style","makeTextContrasty","relatedLinks","l","node","sourceLinks","indexOf","link","targetLinks","relatedNodes","nodeHoveredStyle","sankeyNode","sankey","selectAll","sankeyLink","call","linkHoveredStyle","bind","nodeNonHoveredStyle","linkNonHoveredStyle","visitNodes","label","datum","concentrationscale","tinyColorAlpha","castHoverOption","trace","attr","labelOpts","hoverlabel","val","nestedProperty","get","Array","isArray","module","exports","plot","gd","calcData","fullLayout","_fullLayout","svg","_paper","size","_size","i","_fullData","length","visible","type","_viewInitial","groups","slice","x","y","linkSelect","evt","originalEvent","event","_hoverdata","click","target","linkHover","hovermode","hoverinfo","fullData","emit","points","sourceLabel","targetLabel","concentrationLabel","incomingLabel","outgoingLabel","linkHoverFollow","obj","hoverItems","hoverCenterPosition","hoverCenterX","hoverCenterY","circular","circularPathData","leftInnerExtent","rightInnerExtent","verticalFullExtent","source","x1","x0","y0","y1","center","orientation","reverse","parent","translateX","translateY","anchorIndex","flow","links","pointNumber","hoverCenter","hovertemplateLabels","valueLabel","valueFormat","value","valueSuffix","push","name","text","labelConcentration","join","color","addOpacity","borderColor","fontFamily","fontSize","fontColor","nameLength","textAlign","idealAlign","hovertemplate","eventData","tooltips","loneHover","container","_hoverlayer","outerContainer","each","tooltip","linkUnhover","loneUnhover","nodeSelect","nodeHover","nodeHoverFollow","nodeRect","rootBBox","_paperdiv","getBoundingClientRect","boundingBox","hoverCenterX0","left","hoverCenterX1","right","top","height","_calcInverseTransform","scaleX","_invScaleX","scaleY","_invScaleY","tinyColorHue","nodeUnhover","width","w","h","margin","t","r","b","linkEvents","hover","follow","unhover","nodeEvents"],"sources":["D:/Rohit/Git projects/Manthan/node_modules/plotly.js/src/traces/sankey/plot.js"],"sourcesContent":["'use strict';\n\nvar d3 = require('@plotly/d3');\nvar Lib = require('../../lib');\nvar numberFormat = Lib.numberFormat;\nvar render = require('./render');\nvar Fx = require('../../components/fx');\nvar Color = require('../../components/color');\nvar cn = require('./constants').cn;\n\nvar _ = Lib._;\n\nfunction renderableValuePresent(d) {return d !== '';}\n\nfunction ownTrace(selection, d) {\n    return selection.filter(function(s) {return s.key === d.traceId;});\n}\n\nfunction makeTranslucent(element, alpha) {\n    d3.select(element)\n        .select('path')\n        .style('fill-opacity', alpha);\n    d3.select(element)\n        .select('rect')\n        .style('fill-opacity', alpha);\n}\n\nfunction makeTextContrasty(element) {\n    d3.select(element)\n        .select('text.name')\n        .style('fill', 'black');\n}\n\nfunction relatedLinks(d) {\n    return function(l) {\n        return d.node.sourceLinks.indexOf(l.link) !== -1 || d.node.targetLinks.indexOf(l.link) !== -1;\n    };\n}\n\nfunction relatedNodes(l) {\n    return function(d) {\n        return d.node.sourceLinks.indexOf(l.link) !== -1 || d.node.targetLinks.indexOf(l.link) !== -1;\n    };\n}\n\nfunction nodeHoveredStyle(sankeyNode, d, sankey) {\n    if(d && sankey) {\n        ownTrace(sankey, d)\n            .selectAll('.' + cn.sankeyLink)\n            .filter(relatedLinks(d))\n            .call(linkHoveredStyle.bind(0, d, sankey, false));\n    }\n}\n\nfunction nodeNonHoveredStyle(sankeyNode, d, sankey) {\n    if(d && sankey) {\n        ownTrace(sankey, d)\n            .selectAll('.' + cn.sankeyLink)\n            .filter(relatedLinks(d))\n            .call(linkNonHoveredStyle.bind(0, d, sankey, false));\n    }\n}\n\nfunction linkHoveredStyle(d, sankey, visitNodes, sankeyLink) {\n    var label = sankeyLink.datum().link.label;\n\n    sankeyLink.style('fill-opacity', function(l) {\n        if(!l.link.concentrationscale) {\n            return 0.4;\n        }\n    });\n\n    if(label) {\n        ownTrace(sankey, d)\n            .selectAll('.' + cn.sankeyLink)\n            .filter(function(l) {return l.link.label === label;})\n            .style('fill-opacity', function(l) {\n                if(!l.link.concentrationscale) {\n                    return 0.4;\n                }\n            });\n    }\n\n    if(visitNodes) {\n        ownTrace(sankey, d)\n            .selectAll('.' + cn.sankeyNode)\n            .filter(relatedNodes(d))\n            .call(nodeHoveredStyle);\n    }\n}\n\nfunction linkNonHoveredStyle(d, sankey, visitNodes, sankeyLink) {\n    var label = sankeyLink.datum().link.label;\n\n    sankeyLink.style('fill-opacity', function(d) {return d.tinyColorAlpha;});\n    if(label) {\n        ownTrace(sankey, d)\n            .selectAll('.' + cn.sankeyLink)\n            .filter(function(l) {return l.link.label === label;})\n            .style('fill-opacity', function(d) {return d.tinyColorAlpha;});\n    }\n\n    if(visitNodes) {\n        ownTrace(sankey, d)\n            .selectAll(cn.sankeyNode)\n            .filter(relatedNodes(d))\n            .call(nodeNonHoveredStyle);\n    }\n}\n\n// does not support array values for now\nfunction castHoverOption(trace, attr) {\n    var labelOpts = trace.hoverlabel || {};\n    var val = Lib.nestedProperty(labelOpts, attr).get();\n    return Array.isArray(val) ? false : val;\n}\n\nmodule.exports = function plot(gd, calcData) {\n    var fullLayout = gd._fullLayout;\n    var svg = fullLayout._paper;\n    var size = fullLayout._size;\n\n    // stash initial view\n    for(var i = 0; i < gd._fullData.length; i++) {\n        if(!gd._fullData[i].visible) continue;\n        if(gd._fullData[i].type !== cn.sankey) continue;\n        if(!gd._fullData[i]._viewInitial) {\n            var node = gd._fullData[i].node;\n            gd._fullData[i]._viewInitial = {\n                node: {\n                    groups: node.groups.slice(),\n                    x: node.x.slice(),\n                    y: node.y.slice()\n                }\n            };\n        }\n    }\n\n    var linkSelect = function(element, d) {\n        var evt = d.link;\n        evt.originalEvent = d3.event;\n        gd._hoverdata = [evt];\n        Fx.click(gd, { target: true });\n    };\n\n    var linkHover = function(element, d, sankey) {\n        if(gd._fullLayout.hovermode === false) return;\n        d3.select(element).call(linkHoveredStyle.bind(0, d, sankey, true));\n        if(d.link.trace.link.hoverinfo !== 'skip') {\n            d.link.fullData = d.link.trace;\n            gd.emit('plotly_hover', {\n                event: d3.event,\n                points: [d.link]\n            });\n        }\n    };\n\n    var sourceLabel = _(gd, 'source:') + ' ';\n    var targetLabel = _(gd, 'target:') + ' ';\n    var concentrationLabel = _(gd, 'concentration:') + ' ';\n    var incomingLabel = _(gd, 'incoming flow count:') + ' ';\n    var outgoingLabel = _(gd, 'outgoing flow count:') + ' ';\n\n    var linkHoverFollow = function(element, d) {\n        if(gd._fullLayout.hovermode === false) return;\n        var obj = d.link.trace.link;\n        if(obj.hoverinfo === 'none' || obj.hoverinfo === 'skip') return;\n\n        var hoverItems = [];\n\n        function hoverCenterPosition(link) {\n            var hoverCenterX, hoverCenterY;\n            if(link.circular) {\n                hoverCenterX = (link.circularPathData.leftInnerExtent + link.circularPathData.rightInnerExtent) / 2;\n                hoverCenterY = link.circularPathData.verticalFullExtent;\n            } else {\n                hoverCenterX = (link.source.x1 + link.target.x0) / 2;\n                hoverCenterY = (link.y0 + link.y1) / 2;\n            }\n            var center = [hoverCenterX, hoverCenterY];\n            if(link.trace.orientation === 'v') center.reverse();\n            center[0] += d.parent.translateX;\n            center[1] += d.parent.translateY;\n            return center;\n        }\n\n        // For each related links, create a hoverItem\n        var anchorIndex = 0;\n        for(var i = 0; i < d.flow.links.length; i++) {\n            var link = d.flow.links[i];\n            if(gd._fullLayout.hovermode === 'closest' && d.link.pointNumber !== link.pointNumber) continue;\n            if(d.link.pointNumber === link.pointNumber) anchorIndex = i;\n            link.fullData = link.trace;\n            obj = d.link.trace.link;\n            var hoverCenter = hoverCenterPosition(link);\n            var hovertemplateLabels = {valueLabel: numberFormat(d.valueFormat)(link.value) + d.valueSuffix};\n\n            hoverItems.push({\n                x: hoverCenter[0],\n                y: hoverCenter[1],\n                name: hovertemplateLabels.valueLabel,\n                text: [\n                    link.label || '',\n                    sourceLabel + link.source.label,\n                    targetLabel + link.target.label,\n                    link.concentrationscale ? concentrationLabel + numberFormat('%0.2f')(link.flow.labelConcentration) : ''\n                ].filter(renderableValuePresent).join('<br>'),\n                color: castHoverOption(obj, 'bgcolor') || Color.addOpacity(link.color, 1),\n                borderColor: castHoverOption(obj, 'bordercolor'),\n                fontFamily: castHoverOption(obj, 'font.family'),\n                fontSize: castHoverOption(obj, 'font.size'),\n                fontColor: castHoverOption(obj, 'font.color'),\n                nameLength: castHoverOption(obj, 'namelength'),\n                textAlign: castHoverOption(obj, 'align'),\n                idealAlign: d3.event.x < hoverCenter[0] ? 'right' : 'left',\n\n                hovertemplate: obj.hovertemplate,\n                hovertemplateLabels: hovertemplateLabels,\n                eventData: [link]\n            });\n        }\n\n        var tooltips = Fx.loneHover(hoverItems, {\n            container: fullLayout._hoverlayer.node(),\n            outerContainer: fullLayout._paper.node(),\n            gd: gd,\n            anchorIndex: anchorIndex\n        });\n\n        tooltips.each(function() {\n            var tooltip = this;\n            if(!d.link.concentrationscale) {\n                makeTranslucent(tooltip, 0.65);\n            }\n            makeTextContrasty(tooltip);\n        });\n    };\n\n    var linkUnhover = function(element, d, sankey) {\n        if(gd._fullLayout.hovermode === false) return;\n        d3.select(element).call(linkNonHoveredStyle.bind(0, d, sankey, true));\n        if(d.link.trace.link.hoverinfo !== 'skip') {\n            d.link.fullData = d.link.trace;\n            gd.emit('plotly_unhover', {\n                event: d3.event,\n                points: [d.link]\n            });\n        }\n\n        Fx.loneUnhover(fullLayout._hoverlayer.node());\n    };\n\n    var nodeSelect = function(element, d, sankey) {\n        var evt = d.node;\n        evt.originalEvent = d3.event;\n        gd._hoverdata = [evt];\n        d3.select(element).call(nodeNonHoveredStyle, d, sankey);\n        Fx.click(gd, { target: true });\n    };\n\n    var nodeHover = function(element, d, sankey) {\n        if(gd._fullLayout.hovermode === false) return;\n        d3.select(element).call(nodeHoveredStyle, d, sankey);\n        if(d.node.trace.node.hoverinfo !== 'skip') {\n            d.node.fullData = d.node.trace;\n            gd.emit('plotly_hover', {\n                event: d3.event,\n                points: [d.node]\n            });\n        }\n    };\n\n    var nodeHoverFollow = function(element, d) {\n        if(gd._fullLayout.hovermode === false) return;\n\n        var obj = d.node.trace.node;\n        if(obj.hoverinfo === 'none' || obj.hoverinfo === 'skip') return;\n        var nodeRect = d3.select(element).select('.' + cn.nodeRect);\n        var rootBBox = gd._fullLayout._paperdiv.node().getBoundingClientRect();\n        var boundingBox = nodeRect.node().getBoundingClientRect();\n        var hoverCenterX0 = boundingBox.left - 2 - rootBBox.left;\n        var hoverCenterX1 = boundingBox.right + 2 - rootBBox.left;\n        var hoverCenterY = boundingBox.top + boundingBox.height / 4 - rootBBox.top;\n\n        var hovertemplateLabels = {valueLabel: numberFormat(d.valueFormat)(d.node.value) + d.valueSuffix};\n        d.node.fullData = d.node.trace;\n\n        gd._fullLayout._calcInverseTransform(gd);\n        var scaleX = gd._fullLayout._invScaleX;\n        var scaleY = gd._fullLayout._invScaleY;\n\n        var tooltip = Fx.loneHover({\n            x0: scaleX * hoverCenterX0,\n            x1: scaleX * hoverCenterX1,\n            y: scaleY * hoverCenterY,\n            name: numberFormat(d.valueFormat)(d.node.value) + d.valueSuffix,\n            text: [\n                d.node.label,\n                incomingLabel + d.node.targetLinks.length,\n                outgoingLabel + d.node.sourceLinks.length\n            ].filter(renderableValuePresent).join('<br>'),\n            color: castHoverOption(obj, 'bgcolor') || d.tinyColorHue,\n            borderColor: castHoverOption(obj, 'bordercolor'),\n            fontFamily: castHoverOption(obj, 'font.family'),\n            fontSize: castHoverOption(obj, 'font.size'),\n            fontColor: castHoverOption(obj, 'font.color'),\n            nameLength: castHoverOption(obj, 'namelength'),\n            textAlign: castHoverOption(obj, 'align'),\n            idealAlign: 'left',\n\n            hovertemplate: obj.hovertemplate,\n            hovertemplateLabels: hovertemplateLabels,\n            eventData: [d.node]\n        }, {\n            container: fullLayout._hoverlayer.node(),\n            outerContainer: fullLayout._paper.node(),\n            gd: gd\n        });\n\n        makeTranslucent(tooltip, 0.85);\n        makeTextContrasty(tooltip);\n    };\n\n    var nodeUnhover = function(element, d, sankey) {\n        if(gd._fullLayout.hovermode === false) return;\n        d3.select(element).call(nodeNonHoveredStyle, d, sankey);\n        if(d.node.trace.node.hoverinfo !== 'skip') {\n            d.node.fullData = d.node.trace;\n            gd.emit('plotly_unhover', {\n                event: d3.event,\n                points: [d.node]\n            });\n        }\n\n        Fx.loneUnhover(fullLayout._hoverlayer.node());\n    };\n\n    render(\n        gd,\n        svg,\n        calcData,\n        {\n            width: size.w,\n            height: size.h,\n            margin: {\n                t: size.t,\n                r: size.r,\n                b: size.b,\n                l: size.l\n            }\n        },\n        {\n            linkEvents: {\n                hover: linkHover,\n                follow: linkHoverFollow,\n                unhover: linkUnhover,\n                select: linkSelect\n            },\n            nodeEvents: {\n                hover: nodeHover,\n                follow: nodeHoverFollow,\n                unhover: nodeUnhover,\n                select: nodeSelect\n            }\n        }\n    );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}