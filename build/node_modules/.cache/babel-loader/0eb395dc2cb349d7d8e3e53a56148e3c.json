{"ast":null,"code":"import _regeneratorRuntime from\"D:/Rohit/Git projects/Manthan/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Rohit/Git projects/Manthan/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"D:/Rohit/Git projects/Manthan/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/Rohit/Git projects/Manthan/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{BreadcrumbShowCountlabel,commonPageFieldList,commonPageFieldListSuccess}from\"../../../store/actions\";import CommonPurchaseList from\"../../../components/Common/CommonPurchaseList\";import{useHistory}from\"react-router-dom\";import{url,mode,pageId}from\"../../../routes/index\";import*as _cfunc from\"../../../components/Common/CommonFunction\";import*as _act from\"../../../store/actions\";import{customAlert}from\"../../../CustomAlert/ConfirmDialog\";import GSTMaster from\"./GSTMaster\";import{deleteGSTListId,deleteGSTListId_Success,getGSTList,goButtonForGST_Master_Success}from\"../../../store/Administrator/GSTRedux/action\";import{PageLoadingSpinner,Listloader}from\"../../../components/Common/CommonButton\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GSTList=function GSTList(){var dispatch=useDispatch();var history=useHistory();var hasPagePath=history.location.pathname;var _useState=useState(mode.defaultsave),_useState2=_slicedToArray(_useState,2),pageMode=_useState2[0],setpageMode=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),userAccState=_useState4[0],setUserAccState=_useState4[1];var reducers=useSelector(function(state){return{listBtnLoading:state.GSTReducer.listBtnLoading,GoBtnlistloading:state.GSTReducer.GoBtnlistloading,tableList:state.GSTReducer.GSTList,GSTGoButton:state.GSTReducer.GSTGoButton,deleteMsg:state.GSTReducer.deleteMsg,userAccess:state.Login.RoleAccessUpdateData,pageField:state.CommonPageFieldReducer.pageFieldList};});var userAccess=reducers.userAccess,pageField=reducers.pageField,GSTGoButton=reducers.GSTGoButton,deleteMsg=reducers.deleteMsg,GoBtnlistloading=reducers.GoBtnlistloading;var action={getList:getGSTList,deleteId:deleteGSTListId,deleteSucc:deleteGSTListId_Success};var page_Id=pageId.GST_LIST;// Featch Modules List data  First Rendering\nuseEffect(function(){setpageMode(hasPagePath);dispatch(commonPageFieldListSuccess(null));dispatch(commonPageFieldList(page_Id));dispatch(BreadcrumbShowCountlabel(\"GST Count\".concat(\" :0\")));dispatch(getGSTList());return function(){dispatch(_act.getGSTListSuccess([]));};},[]);useEffect(function(){var userAcc=userAccess.find(function(inx){return inx.id===page_Id;});if(!(userAcc===undefined)){setUserAccState(userAcc);}},[userAccess]);useEffect(function(){if(deleteMsg.Status===true&&deleteMsg.StatusCode===200){dispatch(deleteGSTListId_Success([]));dispatch(getGSTList());}},[deleteMsg]);useEffect(function(){if(GSTGoButton.Status===true&&GSTGoButton.StatusCode===200){dispatch(goButtonForGST_Master_Success(_objectSpread(_objectSpread({},GSTGoButton),{},{Status:false})));history.push({pathname:GSTGoButton.pathname,page_Mode:GSTGoButton.pageMode,editValue:GSTGoButton.rowData});}},[GSTGoButton]);function editBodyfunc(index){var rowData=index.rowData,btnId=index.btnId;var EffectiveDate=rowData.EffectiveDate;_cfunc.btnIsDissablefunc({btnId:btnId,state:true});try{var jsonBody=JSON.stringify({EffectiveDate:EffectiveDate});var config={jsonBody:jsonBody,pathname:url.GST,btnmode:mode.edit,rowData:rowData};// sessionStorage.setItem(\"margin_Master\", config)\ndispatch(_act.goButtonForGST_Master(config));}catch(error){_cfunc.btnIsDissablefunc({btnId:btnId,state:false});}}function deleteBodyfunc(_x){return _deleteBodyfunc.apply(this,arguments);}function _deleteBodyfunc(){_deleteBodyfunc=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(index){var rowData,btnId,rep,config;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:rowData=index.rowData,btnId=index.btnId;if(!rowData.CommonID){_context.next=6;break;}_context.next=4;return customAlert({Type:8,Message:\"Are you sure you want to delete this \".concat(\"EffectiveDate\",\": \\\"\",rowData.EffectiveDate,\"\\\"\")});case 4:rep=_context.sent;if(rep){_cfunc.btnIsDissablefunc({btnId:btnId,state:true});config={btnId:btnId,deleteId:rowData.CommonID};try{dispatch(deleteGSTListId(config));}catch(error){_cfunc.btnIsDissablefunc({btnId:btnId,state:false});}}case 6:case\"end\":return _context.stop();}}},_callee);}));return _deleteBodyfunc.apply(this,arguments);}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(PageLoadingSpinner,{isLoading:GoBtnlistloading||!pageField}),/*#__PURE__*/_jsx(\"div\",{className:\"page-content\",children:pageField&&/*#__PURE__*/_jsx(CommonPurchaseList,{action:action,reducers:reducers,showBreadcrumb:false,MasterModal:GSTMaster,masterPath:url.GST,newBtnPath:url.GST,ButtonMsgLable:\"GST\",deleteName:\"EffectiveDate\",pageMode:pageMode,editBodyfunc:editBodyfunc,deleteBodyfunc:deleteBodyfunc})})]});};export default GSTList;","map":{"version":3,"names":["React","useEffect","useState","useSelector","useDispatch","BreadcrumbShowCountlabel","commonPageFieldList","commonPageFieldListSuccess","CommonPurchaseList","useHistory","url","mode","pageId","_cfunc","_act","customAlert","GSTMaster","deleteGSTListId","deleteGSTListId_Success","getGSTList","goButtonForGST_Master_Success","PageLoadingSpinner","Listloader","GSTList","dispatch","history","hasPagePath","location","pathname","defaultsave","pageMode","setpageMode","userAccState","setUserAccState","reducers","state","listBtnLoading","GSTReducer","GoBtnlistloading","tableList","GSTGoButton","deleteMsg","userAccess","Login","RoleAccessUpdateData","pageField","CommonPageFieldReducer","pageFieldList","action","getList","deleteId","deleteSucc","page_Id","GST_LIST","getGSTListSuccess","userAcc","find","inx","id","undefined","Status","StatusCode","push","page_Mode","editValue","rowData","editBodyfunc","index","btnId","EffectiveDate","btnIsDissablefunc","jsonBody","JSON","stringify","config","GST","btnmode","edit","goButtonForGST_Master","error","deleteBodyfunc","CommonID","Type","Message","rep"],"sources":["D:/Rohit/Git projects/Manthan/src/pages/Adminisrator/GSTPages/GSTList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport {\r\n  BreadcrumbShowCountlabel,\r\n  commonPageFieldList,\r\n  commonPageFieldListSuccess\r\n} from \"../../../store/actions\";\r\nimport CommonPurchaseList from \"../../../components/Common/CommonPurchaseList\"\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { url, mode, pageId } from \"../../../routes/index\"\r\nimport * as _cfunc from \"../../../components/Common/CommonFunction\";\r\nimport * as _act from \"../../../store/actions\";\r\nimport { customAlert } from \"../../../CustomAlert/ConfirmDialog\";\r\nimport GSTMaster from \"./GSTMaster\";\r\nimport { deleteGSTListId, deleteGSTListId_Success, getGSTList, goButtonForGST_Master_Success } from \"../../../store/Administrator/GSTRedux/action\";\r\nimport { PageLoadingSpinner, Listloader } from \"../../../components/Common/CommonButton\";\r\n\r\nconst GSTList = () => {\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const hasPagePath = history.location.pathname\r\n\r\n  const [pageMode, setpageMode] = useState(mode.defaultsave)\r\n  const [userAccState, setUserAccState] = useState('');\r\n\r\n  const reducers = useSelector(\r\n    (state) => ({\r\n      listBtnLoading: state.GSTReducer.listBtnLoading,\r\n      GoBtnlistloading: state.GSTReducer.GoBtnlistloading,\r\n      tableList: state.GSTReducer.GSTList,\r\n      GSTGoButton: state.GSTReducer.GSTGoButton,\r\n      deleteMsg: state.GSTReducer.deleteMsg,\r\n      userAccess: state.Login.RoleAccessUpdateData,\r\n      pageField: state.CommonPageFieldReducer.pageFieldList\r\n    })\r\n  );\r\n\r\n  const { userAccess, pageField, GSTGoButton, deleteMsg, GoBtnlistloading } = reducers;\r\n\r\n  const action = {\r\n    getList: getGSTList,\r\n    deleteId: deleteGSTListId,\r\n    deleteSucc: deleteGSTListId_Success\r\n  }\r\n  const page_Id = pageId.GST_LIST\r\n\r\n  // Featch Modules List data  First Rendering\r\n  useEffect(() => {\r\n    setpageMode(hasPagePath)\r\n    dispatch(commonPageFieldListSuccess(null))\r\n    dispatch(commonPageFieldList(page_Id))\r\n    dispatch(BreadcrumbShowCountlabel(`${\"GST Count\"} :0`))\r\n    dispatch(getGSTList())\r\n    return () => {\r\n      dispatch(_act.getGSTListSuccess([]));\r\n    }\r\n\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let userAcc = userAccess.find((inx) => {\r\n      return (inx.id === page_Id)\r\n    })\r\n    if (!(userAcc === undefined)) {\r\n      setUserAccState(userAcc)\r\n    }\r\n  }, [userAccess])\r\n\r\n  useEffect(() => {\r\n\r\n    if (deleteMsg.Status === true && deleteMsg.StatusCode === 200) {\r\n      dispatch(deleteGSTListId_Success([]))\r\n      dispatch(getGSTList())\r\n    }\r\n  }, [deleteMsg]);\r\n\r\n  useEffect(() => {\r\n\r\n    if (GSTGoButton.Status === true && GSTGoButton.StatusCode === 200) {\r\n      dispatch(goButtonForGST_Master_Success({ ...GSTGoButton, Status: false }))\r\n      history.push({\r\n        pathname: GSTGoButton.pathname,\r\n        page_Mode: GSTGoButton.pageMode,\r\n        editValue: GSTGoButton.rowData\r\n      })\r\n    }\r\n  }, [GSTGoButton]);\r\n\r\n  function editBodyfunc(index) {\r\n\r\n    const { rowData, btnId } = index\r\n    let { EffectiveDate } = rowData;\r\n    _cfunc.btnIsDissablefunc({ btnId, state: true })\r\n\r\n    try {\r\n      const jsonBody = JSON.stringify({\r\n        EffectiveDate: EffectiveDate\r\n      })\r\n      let config = { jsonBody, pathname: url.GST, btnmode: mode.edit, rowData: rowData }\r\n      // sessionStorage.setItem(\"margin_Master\", config)\r\n      dispatch(_act.goButtonForGST_Master(config));\r\n    } catch (error) { _cfunc.btnIsDissablefunc({ btnId, state: false }) }\r\n  }\r\n\r\n  async function deleteBodyfunc(index) {\r\n\r\n    const { rowData, btnId } = index\r\n    if (rowData.CommonID) {\r\n      const rep = await customAlert({\r\n        Type: 8,\r\n        Message: `Are you sure you want to delete this ${\"EffectiveDate\"}: \"${rowData.EffectiveDate}\"`,\r\n      })\r\n      if (rep) {\r\n        _cfunc.btnIsDissablefunc({ btnId, state: true })\r\n        let config = { btnId, deleteId: rowData.CommonID }\r\n        try {\r\n          dispatch(deleteGSTListId(config))\r\n        }\r\n        catch (error) { _cfunc.btnIsDissablefunc({ btnId, state: false }) }\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <PageLoadingSpinner isLoading={(GoBtnlistloading || !pageField)} />\r\n      <div className=\"page-content\">\r\n        {\r\n\r\n          (pageField) &&\r\n          <CommonPurchaseList\r\n            action={action}\r\n            reducers={reducers}\r\n            showBreadcrumb={false}\r\n            MasterModal={GSTMaster}\r\n            masterPath={url.GST}\r\n            newBtnPath={url.GST}\r\n            ButtonMsgLable={\"GST\"}\r\n            deleteName={\"EffectiveDate\"}\r\n            pageMode={pageMode}\r\n            editBodyfunc={editBodyfunc}\r\n            deleteBodyfunc={deleteBodyfunc}\r\n          />\r\n\r\n        }\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default GSTList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}